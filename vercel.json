{
    "version": 2,
    "builds": [
      {
        "src": "farmconnect/wsgi.py",
        "use": "@vercel/python",
        "config": {
          "maxLambdaSize": "15mb",
          "runtime": "python3.12"
        },
        "commands": {
            "install": "pip install -r requirements.txt",
            "collectstatic": "python manage.py collectstatic --noinput",
            "migrate": "python manage.py migrate"
          }
      },

      {
        "src": "build_files.sh",
        "use": "@vercel/static-build",
        "config": {
          "distDir": "staticfiles_build"
        }
      }
    ],
    "routes": [
      {
        "src": "/static/(.*)",
        "dest": "/static/$1"
      },
      {
        "src": "/(.*)",
        "dest": "farmconnect/wsgi.py"
      }
    ]
  }